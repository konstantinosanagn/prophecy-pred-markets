DEMO: prophily - Prediction Market Analysis Platform
======================================================

INTRODUCTION TO PREDICTION MARKETS
----------------------------------

Prediction markets are platforms where users can trade shares on the outcome of future events. 
Polymarket is one of the largest prediction markets, allowing people to bet on everything from 
elections to economic indicators to sports outcomes. Each market has a "YES" and "NO" outcome, 
with prices that reflect the market's collective probability assessment.

THE PAIN POINT
--------------

While prediction markets offer unique trading opportunities, analyzing them effectively is 
time-consuming and complex. To make informed decisions, traders need to:

- Understand contract details and resolution criteria
- Read news, macro context, and platform-specific details
- Synthesize all information into a probability assessment
- Calculate edge vs current market prices
- Determine appropriate position sizing

This manual process is slow, error-prone, and doesn't scale well when analyzing multiple markets.

WHAT IS PROPHILY?
-----------------

prophily is an automated AI-powered analysis platform that transforms a single Polymarket URL 
into a clear, actionable trading signal. The system uses specialized AI agents to:

1. Fetch real-time market data from Polymarket
2. Automatically aggregate relevant news articles from Tavily API
3. Analyze sentiment and context using OpenAI's language models
4. Generate trading signals with confidence levels, edge calculations, and Kelly Criterion sizing
5. Produce comprehensive analysis reports with bull/bear cases

All analysis runs are stored in MongoDB, enabling historical tracking and backtesting.

THE HOMESCREEN (BEFORE URL INPUT)
----------------------------------

When you first open prophily, you'll see:

- **Top Navigation Bar**: 
  - "prophily" branding on the left
  - Tavily and OpenAI logos on the right (indicating the AI/API integrations)

- **URL Input Bar**: 
  - A prominent rounded input field with a link icon
  - Placeholder text: "Enter Polymarket URL"
  - Submit button (arrow icon) that's disabled until a URL is entered
  - The input has a glassmorphic design with backdrop blur

- **Main Content Area**: 
  - An empty state message: "Enter a Polymarket URL above to generate analysis."
  - Displayed in a dashed border box

- **Left Sidebar - Configuration Panel**:
  - Collapsible panel with settings icon
  - Configuration options for analysis behavior:
    * Use Tavily Prompt Agent (toggle)
    * Use News Summary Agent (toggle)
    * Max Articles (5-30, default: 15)
    * Max Articles Per Query (5-12, default: 8)
    * Min Confidence Level (low/medium/high, default: medium)
    * Enable Sentiment Analysis (toggle)
  - Reset to defaults button

- **Right Sidebar - Recent Sessions**:
  - Shows list of recent analysis runs
  - Each card displays:
    * Market question or event title
    * YES/NO prices
    * Signal direction (up/down/flat) with icon
    * Confidence level badge
    * Timestamp (e.g., "2h ago", "Just now")
    * Status indicators for analysis phases
  - Refresh button to reload recent sessions
  - Cards are clickable to view previous analyses

AFTER URL SUBMISSION
--------------------

Once you submit a Polymarket URL, the analysis begins in phases:

**Phase 1: Market Snapshot** (appears first)
- Market question and details
- Current YES/NO prices
- Best bid/ask spreads
- Volume and liquidity metrics
- Market end date
- Loading skeleton appears while processing

**Phase 2: News Context** (appears next)
- Aggregated news articles from Tavily
- Each article shows:
  * Title and source
  * Snippet/preview
  * Sentiment indicator (bullish/bearish/neutral)
  * Publication date
  * Clickable link to full article
- News summary generated by AI
- Loading skeleton appears while processing

**Phase 3: Trading Signal** (appears next)
- Signal direction: UP, DOWN, or FLAT
- Model probability vs market probability
- Edge percentage (difference between model and market)
- Confidence level (low/medium/high) with badge
- Rationale explaining the signal
- Kelly Criterion sizing recommendation
- Loading skeleton appears while processing

**Phase 4: Final Report** (appears last)
- Comprehensive analysis with:
  * Headline summary
  * Thesis (3-5 sentences tying together market, news, and edge)
  * Bull case (2-4 bullet points)
  * Bear case (2-4 bullet points)
  * Key risks (2-4 bullet points)
  * Execution notes (sizing, take-profit/stop-loss, re-check timing)
- Rendered as formatted markdown

**Real-Time Updates:**
- The UI polls the backend every few seconds
- Results appear incrementally as each phase completes
- Status indicators show which phases are pending/done/error
- The run is automatically saved to Recent Sessions when complete

**Market Selection (if needed):**
- If the URL points to an event with multiple markets, a selection modal appears
- Shows list of available markets with their questions
- User selects which market to analyze
- Analysis proceeds for the selected market

CONFIGURATION SETTINGS
----------------------

The Configuration Panel (left sidebar) allows you to customize analysis behavior:

**Agent Toggles:**
- **Use Tavily Prompt Agent**: When enabled, uses AI to generate optimized search queries. 
  When disabled, uses fallback queries based on market keywords.
- **Use News Summary Agent**: When enabled, generates AI-powered news summaries. 
  When disabled, uses a simpler fallback summary.

**Article Limits:**
- **Max Articles**: Total number of articles to include in analysis (5-30, default: 15)
- **Max Articles Per Query**: Maximum results per Tavily search query (5-12, default: 8)

**Analysis Settings:**
- **Min Confidence Level**: Minimum confidence threshold for signals (low/medium/high, default: medium)
  - Low: Accepts signals with lower confidence
  - Medium: Balanced approach (default)
  - High: Only accepts high-confidence signals
- **Enable Sentiment Analysis**: Toggle sentiment analysis on news articles (on/off, default: on)

**Usage:**
- Adjust settings before submitting a URL
- Settings persist during the session
- Click "Reset to Defaults" to restore original values
- Settings are applied to new analyses, not existing ones

CROSS-ANALYZING MARKETS WITH RECENT SESSIONS
---------------------------------------------

The Recent Sessions sidebar (right side) enables powerful cross-analysis capabilities:

**Viewing Recent Runs:**
- Automatically loads the 20 most recent analysis runs
- Shows runs from all markets, sorted by timestamp (newest first)
- Each card displays key information at a glance

**Comparing Markets in the Same Event:**
1. Analyze the first market from an event (e.g., "Will the Fed raise rates?")
2. The run appears in Recent Sessions
3. Click on a different market card from the same event
4. View the analysis side-by-side or switch between them
5. Compare signals, news context, and reports across related markets

**Key Features:**
- **Click any card** to load that analysis into the main view
- **Active run highlighting**: The currently selected run is visually highlighted
- **Status indicators**: See which phases completed for each run
- **Quick comparison**: Easily switch between different analyses
- **Historical context**: Review how your analysis of a market changed over time

**Use Cases:**
- Compare multiple markets within the same event to understand correlations
- Review previous analyses before making new trades
- Track how market sentiment evolved over time
- Identify patterns across different market types
- Backtest your analysis accuracy by reviewing old signals

**Refresh Functionality:**
- Click the refresh icon to reload recent sessions
- Useful after completing new analyses
- Automatically updates when new runs complete

WORKFLOW EXAMPLE
----------------

1. **Initial State**: Open prophily → see empty state with URL input bar

2. **Configure (Optional)**: Adjust settings in Configuration Panel (e.g., set min confidence to "high")

3. **Submit URL**: Paste "https://polymarket.com/event/fed-decision-in-december" → click submit

4. **Market Selection** (if needed): Select specific market from event

5. **Watch Analysis Progress**:
   - Phase 1: Market snapshot appears (~5 seconds)
   - Phase 2: News articles and summary appear (~15-30 seconds)
   - Phase 3: Trading signal appears (~20-40 seconds)
   - Phase 4: Final report appears (~30-60 seconds total)

6. **Review Results**: Read signal, rationale, and full report

7. **Cross-Analyze**: Click on related market in Recent Sessions to compare

8. **Adjust and Re-run**: Modify configuration, submit different URL, or re-analyze same market

CONCLUSION
----------

prophily transforms the manual, time-consuming process of analyzing prediction markets into an 
automated, AI-powered workflow. By combining real-time market data, intelligent news aggregation, 
and sophisticated AI analysis, it provides traders with actionable signals and comprehensive 
reports in seconds rather than hours.

The phased analysis approach ensures users see results incrementally, while the Recent Sessions 
sidebar enables powerful cross-analysis capabilities for comparing markets and tracking historical 
performance.

